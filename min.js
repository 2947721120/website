!function(e){function r(e){var r,t=document,o=e;if(t.body.createTextRange)r=t.body.createTextRange(),r.moveToElementText(o),r.select();else if(window.getSelection){var n=window.getSelection();r=t.createRange(),r.selectNodeContents(o),n.removeAllRanges(),n.addRange(r)}}function t(e,r){var t=function(e){function r(e,r){return e<<r|e>>>32-r}function t(e,r){var t,o,n,a,c;return n=2147483648&e,a=2147483648&r,t=1073741824&e,o=1073741824&r,c=(1073741823&e)+(1073741823&r),t&o?2147483648^c^n^a:t|o?1073741824&c?3221225472^c^n^a:1073741824^c^n^a:c^n^a}function o(e,r,t){return e&r|~e&t}function n(e,r,t){return e&t|r&~t}function a(e,r,t){return e^r^t}function c(e,r,t){return r^(e|~t)}function i(e,n,a,c,i,s,l){return e=t(e,t(t(o(n,a,c),i),l)),t(r(e,s),n)}function s(e,o,a,c,i,s,l){return e=t(e,t(t(n(o,a,c),i),l)),t(r(e,s),o)}function l(e,o,n,c,i,s,l){return e=t(e,t(t(a(o,n,c),i),l)),t(r(e,s),o)}function u(e,o,n,a,i,s,l){return e=t(e,t(t(c(o,n,a),i),l)),t(r(e,s),o)}function f(e){for(var r,t=e.length,o=t+8,n=(o-o%64)/64,a=16*(n+1),c=Array(a-1),i=0,s=0;t>s;)r=(s-s%4)/4,i=8*(s%4),c[r]=c[r]|e.charCodeAt(s)<<i,s++;return r=(s-s%4)/4,i=8*(s%4),c[r]=c[r]|128<<i,c[a-2]=t<<3,c[a-1]=t>>>29,c}function d(e){var r,t,o="",n="";for(t=0;3>=t;t++)r=255&e>>>8*t,n="0"+r.toString(16),o+=n.substr(n.length-2,2);return o}function v(e){e=e.replace(/rn/g,"n");for(var r="",t=0;t<e.length;t++){var o=e.charCodeAt(t);128>o?r+=String.fromCharCode(o):o>127&&2048>o?(r+=String.fromCharCode(192|o>>6),r+=String.fromCharCode(128|63&o)):(r+=String.fromCharCode(224|o>>12),r+=String.fromCharCode(128|63&o>>6),r+=String.fromCharCode(128|63&o))}return r}var h,g,p,m,w,C,y,S,b,_=Array(),x=7,k=12,A=17,T=22,j=5,R=9,U=14,E=20,q=4,D=11,L=16,N=23,K=6,O=10,V=15,z=21;for(e=v(e),_=f(e),C=1732584193,y=4023233417,S=2562383102,b=271733878,h=0;h<_.length;h+=16)g=C,p=y,m=S,w=b,C=i(C,y,S,b,_[h+0],x,3614090360),b=i(b,C,y,S,_[h+1],k,3905402710),S=i(S,b,C,y,_[h+2],A,606105819),y=i(y,S,b,C,_[h+3],T,3250441966),C=i(C,y,S,b,_[h+4],x,4118548399),b=i(b,C,y,S,_[h+5],k,1200080426),S=i(S,b,C,y,_[h+6],A,2821735955),y=i(y,S,b,C,_[h+7],T,4249261313),C=i(C,y,S,b,_[h+8],x,1770035416),b=i(b,C,y,S,_[h+9],k,2336552879),S=i(S,b,C,y,_[h+10],A,4294925233),y=i(y,S,b,C,_[h+11],T,2304563134),C=i(C,y,S,b,_[h+12],x,1804603682),b=i(b,C,y,S,_[h+13],k,4254626195),S=i(S,b,C,y,_[h+14],A,2792965006),y=i(y,S,b,C,_[h+15],T,1236535329),C=s(C,y,S,b,_[h+1],j,4129170786),b=s(b,C,y,S,_[h+6],R,3225465664),S=s(S,b,C,y,_[h+11],U,643717713),y=s(y,S,b,C,_[h+0],E,3921069994),C=s(C,y,S,b,_[h+5],j,3593408605),b=s(b,C,y,S,_[h+10],R,38016083),S=s(S,b,C,y,_[h+15],U,3634488961),y=s(y,S,b,C,_[h+4],E,3889429448),C=s(C,y,S,b,_[h+9],j,568446438),b=s(b,C,y,S,_[h+14],R,3275163606),S=s(S,b,C,y,_[h+3],U,4107603335),y=s(y,S,b,C,_[h+8],E,1163531501),C=s(C,y,S,b,_[h+13],j,2850285829),b=s(b,C,y,S,_[h+2],R,4243563512),S=s(S,b,C,y,_[h+7],U,1735328473),y=s(y,S,b,C,_[h+12],E,2368359562),C=l(C,y,S,b,_[h+5],q,4294588738),b=l(b,C,y,S,_[h+8],D,2272392833),S=l(S,b,C,y,_[h+11],L,1839030562),y=l(y,S,b,C,_[h+14],N,4259657740),C=l(C,y,S,b,_[h+1],q,2763975236),b=l(b,C,y,S,_[h+4],D,1272893353),S=l(S,b,C,y,_[h+7],L,4139469664),y=l(y,S,b,C,_[h+10],N,3200236656),C=l(C,y,S,b,_[h+13],q,681279174),b=l(b,C,y,S,_[h+0],D,3936430074),S=l(S,b,C,y,_[h+3],L,3572445317),y=l(y,S,b,C,_[h+6],N,76029189),C=l(C,y,S,b,_[h+9],q,3654602809),b=l(b,C,y,S,_[h+12],D,3873151461),S=l(S,b,C,y,_[h+15],L,530742520),y=l(y,S,b,C,_[h+2],N,3299628645),C=u(C,y,S,b,_[h+0],K,4096336452),b=u(b,C,y,S,_[h+7],O,1126891415),S=u(S,b,C,y,_[h+14],V,2878612391),y=u(y,S,b,C,_[h+5],z,4237533241),C=u(C,y,S,b,_[h+12],K,1700485571),b=u(b,C,y,S,_[h+3],O,2399980690),S=u(S,b,C,y,_[h+10],V,4293915773),y=u(y,S,b,C,_[h+1],z,2240044497),C=u(C,y,S,b,_[h+8],K,1873313359),b=u(b,C,y,S,_[h+15],O,4264355552),S=u(S,b,C,y,_[h+6],V,2734768916),y=u(y,S,b,C,_[h+13],z,1309151649),C=u(C,y,S,b,_[h+4],K,4149444226),b=u(b,C,y,S,_[h+11],O,3174756917),S=u(S,b,C,y,_[h+2],V,718787259),y=u(y,S,b,C,_[h+9],z,3951481745),C=t(C,g),y=t(y,p),S=t(S,m),b=t(b,w);var B=d(C)+d(y)+d(S)+d(b);return B.toLowerCase()},r=r||80;return"http://www.gravatar.com/avatar/"+t(e)+".jpg?s="+r}function o(){e(".sponsors").slideUp(200),e(".logged-in").slideDown(),e("#name").text(u.login),e("#gravatar").attr("src",t(u.email,64)),a(c),e("body").addClass("authenticated"),e(".login-box").hide()}function n(e){UserApp.User.get({user_id:"self"},function(r,t){r?e&&e(null):e&&e(t[0])})}function a(r){e.get("http://cdnjs-server.herokuapp.com/favorites?token="+f,function(e){e&&(d=e,r(e))},"json")}function c(r){_.each(r,function(r){r="#"+r;var t=e(r),o=t.clone(!0);t.remove(),o.addClass("favorite"),e("#example tbody").prepend(o)})}function i(e,r){var t=[],o=e.length,n=r.length;if(0==o)return n;if(0==n)return o;for(var a=o;a>=0;a--)t[a]=[];for(var a=o;a>=0;a--)t[a][0]=a;for(var c=n;c>=0;c--)t[0][c]=c;for(var a=1;o>=a;a++)for(var i=e.charAt(a-1),c=1;n>=c;c++){if(a==c&&t[a][c]>4)return o;var s=r.charAt(c-1),l=i==s?0:1,u=t[a-1][c]+1,f=t[a][c-1]+1,d=t[a-1][c-1]+l;u>f&&(u=f),u>d&&(u=d),t[a][c]=u,a>1&&c>1&&i==r.charAt(c-2)&&e.charAt(a-2)==s&&(t[a][c]=Math.min(t[a][c],t[a-2][c-2]+l))}return t[o][n]}function s(r){if(e(rowSelector).removeClass("search-result"),r.length>0){var t=[];cleanSearchVal=r.replace(/\./g,"").toLowerCase();for(var o=0;o<libraryNameCache.length;o++){var n=libraryNameCache[o];e("#"+n);var a=i(n,r),s=-1!==n.toLowerCase().indexOf(cleanSearchVal),l=_.contains(d,n);"jquery"===n&&console.log(a),(s||2>a)&&("jquery"===n&&console.log("made it"),t.push({name:n,levDist:a,favorite:l}))}t=_.sortBy(t,function(e){var r=e.favorite?-1e3:0;return r+e.levDist}),e(rowSelector).hide();for(var u=t.length;u>0;u--){var f=t[u-1],v=_.findWhere(e(rowSelector),{id:f.name});e(v).addClass("search-result"),e(v).prependTo("#example > tbody")}e(matchedRowSelector).show()}else e(rowSelector).show(),c(d)}function l(r){var t=e(r.currentTarget).val();s(t)}UserApp.initialize({appId:"5343d12871774"});var u=null,f=Kaka.get("ua_session_token");f&&(UserApp.setToken(f),n(function(e){e&&(console.log(e),u=e,o())})),window.logout=function(){Kaka.remove("ua_session_token"),UserApp.User.logout(function(){window.location.href="login.html"})};var d=[];e("#example .change-favorite").on("click",function(r){var t=e(r.currentTarget).parents("tr")[0].id;_.contains(d,t)?_.isArray(d)&&d.length>0&&(_gaq.push(["_trackEvent","favorite","removed",t]),d=_.without(d,t),e.ajax({url:"http://cdnjs-server.herokuapp.com/favorites?token="+f,success:function(){console.log(arguments)},type:"DELETE",data:{library:t}})):(d.push(t),_gaq.push(["_trackEvent","favorite","added",t]),e.ajax({url:"http://cdnjs-server.herokuapp.com/favorites?token="+f,success:function(){console.log(arguments)},type:"POST",data:{library:t}}));var o=e("#"+t);console.log(o),o.hasClass("favorite")?(e(o).appendTo("#example tbody"),o.removeClass("favorite")):(window.a=o,o.addClass("favorite"),e(o).prependTo("#example tbody"))}),e("p.library-url").on("mouseenter",function(t){r(e(t.currentTarget)[0])}),rowSelector="#example > tbody > tr",matchedRowSelector="#example tr.search-result",libraryNameCache=_.pluck(e(rowSelector),"id"),e("#search-box").on("keyup",_.debounce(l,300)),e("#search-box").focus()}(jQuery);